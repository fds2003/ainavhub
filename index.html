<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½èšè½ - fds2003çš„AIèµ„è®¯å¯¼èˆª</title>
    <meta name="description" content="fds2003çš„AIèµ„è®¯å¯¼èˆªå¹³å°ï¼Œå®æ—¶èšåˆå…¨çƒAIé¢†åŸŸæœ€æ–°åŠ¨æ€å’Œå·¥å…·æ¨è">
    <meta name="keywords" content="äººå·¥æ™ºèƒ½, AIèµ„è®¯, å·¥å…·å¯¼èˆª, AIæŠ€æœ¯, æœºå™¨å­¦ä¹ , fds2003">
    <meta name="author" content="fds2003">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        .loading-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
        .personal-border { border-left: 4px solid #2563eb; }
    </style>
</head>

<body class="bg-gradient-to-br from-blue-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-blue-900 min-h-screen">
    <header class="bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-12 h-12 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center">
                        <i class="fas fa-robot text-white text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800 dark:text-white">æ™ºèƒ½èšè½</h1>
                        <p class="text-sm text-gray-600 dark:text-gray-300">fds2003çš„AIå‰æ²¿å¯¼èˆª</p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <section class="text-center py-16 mb-12">
            <h2 class="text-4xl md:text-5xl font-bold text-gray-800 dark:text-white mb-6">
                å‘ç°AIä¸–ç•Œçš„<span class="text-blue-600 dark:text-blue-400">ç²¾å½©</span>
            </h2>
            <p class="text-xl text-gray-600 dark:text-gray-300 mb-8 max-w-3xl mx-auto">
                fds2003ä¸ºæ‚¨ç²¾é€‰å…¨çƒäººå·¥æ™ºèƒ½é¢†åŸŸçš„æœ€æ–°èµ„è®¯ã€å‰æ²¿æŠ€æœ¯å’Œå®ç”¨å·¥å…·
            </p>
            <div class="flex items-center justify-center space-x-4 text-sm text-gray-500 dark:text-gray-400">
                <span class="flex items-center"><i class="fas fa-sync-alt mr-2"></i>æ¯4å°æ—¶è‡ªåŠ¨æ›´æ–°</span>
                <span class="flex items-center"><i class="fas fa-robot mr-2"></i>AIæ™ºèƒ½ç­›é€‰</span>
                <span class="flex items-center"><i class="fas fa-globe mr-2"></i>å…¨çƒèµ„è®¯èšåˆ</span>
            </div>
        </section>

        <section class="mb-16">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold text-gray-800 dark:text-white mb-4 flex items-center justify-center">
                    <i class="fas fa-newspaper text-blue-600 mr-3"></i>æœ€æ–°AIèµ„è®¯
                </h3>
                <p class="text-gray-600 dark:text-gray-300">å®æ—¶èšåˆçš„AIé¢†åŸŸå‰æ²¿åŠ¨æ€</p>
            </div>

            <div id="ai-news-content" class="grid gap-6">
                <div class="text-center py-12">
                    <div class="inline-block animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mb-4"></div>
                    <p class="text-gray-600 dark:text-gray-400 text-lg">æ­£åœ¨ä¸ºfds2003åŠ è½½æœ€æ–°AIèµ„è®¯...</p>
                    <p class="text-sm text-gray-500 dark:text-gray-500 mt-2">é¦–æ¬¡åŠ è½½éœ€è¦5-10ç§’ï¼Œè¯·è€å¿ƒç­‰å¾…</p>
                </div>
            </div>

            <div class="text-center mt-8">
                <p class="text-sm text-gray-500 dark:text-gray-400">
                    <i class="fas fa-clock mr-1"></i>
                    æ•°æ®æ›´æ–°æ—¶é—´: <span id="last-update-time">åŠ è½½ä¸­...</span>
                    <button onclick="AINewsSystem.update()" class="ml-2 text-blue-600 hover:text-blue-800">
                        <i class="fas fa-refresh mr-1"></i>æ‰‹åŠ¨åˆ·æ–°
                    </button>
                </p>
            </div>
        </section>

        <section class="text-center py-12 bg-white/50 dark:bg-gray-800/50 rounded-xl">
            <div class="max-w-2xl mx-auto">
                <h4 class="text-2xl font-bold text-gray-800 dark:text-white mb-4">å…³äº fds2003 çš„ AI èµ„è®¯å¹³å°</h4>
                <p class="text-gray-600 dark:text-gray-300 mb-6 leading-relaxed">
                    è¿™ä¸ªå¹³å°æ˜¯ä¸“ä¸ºAIä»ä¸šè€…å’Œçˆ±å¥½è€…æ‰“é€ çš„èµ„è®¯å¯¼èˆªå·¥å…·ã€‚æˆ‘å¸Œæœ›é€šè¿‡æŠ€æœ¯æ‰‹æ®µï¼Œ
                    è®©å¤§å®¶èƒ½å¤Ÿæ›´è½»æ¾åœ°è·å–AIé¢†åŸŸçš„æœ€æ–°åŠ¨æ€å’Œä¼˜è´¨å·¥å…·ã€‚
                </p>
                <div class="flex items-center justify-center space-x-6 text-sm text-gray-500 dark:text-gray-400">
                    <a href="https://github.com/fds2003" target="_blank" class="hover:text-blue-600 dark:hover:text-blue-400 flex items-center">
                        <i class="fab fa-github mr-2"></i>GitHub
                    </a>
                    <span class="flex items-center">
                        <i class="fas fa-envelope mr-2"></i>fds2003@163.com
                    </span>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-900 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p class="text-gray-300">
                Â© 2024 fds2003 - æ™ºèƒ½èšè½ AIèµ„è®¯å¹³å° |
                åŸºäº <a href="https://github.com/fds2003/ainavhub" target="_blank" class="text-blue-400 hover:text-blue-300">AiNavHub</a> æŠ€æœ¯æ„å»º
            </p>
        </div>
    </footer>

    <!-- æ ¸å¿ƒåŠŸèƒ½è„šæœ¬ -->
    <script>
        // AiNavHubç®€åŒ–ç‰ˆé…ç½® - ä¸“ä¸ºfds2003 (GitHub Actions + JSONæ•°æ®æ–¹æ¡ˆ)
        const AINewsConfig = {
            dataPath: './data/rss-data.json',
            cacheKey: 'ai_news_cache',
            cacheTimeout: 30 * 60 * 1000, // 30åˆ†é’Ÿæœ¬åœ°ç¼“å­˜
            aiScoreThreshold: 3.0,
            maxArticles: 15,

            // AIå·¥å…·åˆ†ç±»ï¼ˆç”¨äºå†…å®¹åˆ†æï¼‰
            aiTools: [
                {name: "ChatGPT", keywords: ["chat", "GPT", "openai", "chatgpt"], category: "èŠå¤©æœºå™¨äºº"},
                {name: "Stable Diffusion", keywords: ["stable diffusion", "image generation", "æ–‡æœ¬ç”Ÿæˆå›¾åƒ"], category: "å›¾åƒç”Ÿæˆ"},
                {name: "GitHub Copilot", keywords: ["copilot", "ä»£ç ", "ç¼–ç¨‹", "github"], category: "ç¼–ç¨‹åŠ©æ‰‹"},
                {name: "Claude", keywords: ["claude", "anthropic", "AIåŠ©æ‰‹"], category: "AIåŠ©æ‰‹"},
                {name: "DALL-E", keywords: ["dall-e", "å›¾åƒç”Ÿæˆ", "openai"], category: "å›¾åƒç”Ÿæˆ"},
                {name: "Midjourney", keywords: ["midjourney", "AIç»˜å›¾", "å›¾åƒåˆ›ä½œ"], category: "å›¾åƒç”Ÿæˆ"}
            ],

            // å¤‡ç”¨çš„é™æ€æ–°é—»æ•°æ®ï¼ˆç”¨äºæ¼”ç¤ºå’Œé™çº§æ–¹æ¡ˆï¼‰
            fallbackData: [
                {
                    title: "äººå·¥æ™ºèƒ½åœ¨åŒ»ç–—é¢†åŸŸå–å¾—æ–°çªç ´",
                    description: "æœ€æ–°ç ”ç©¶æ˜¾ç¤ºï¼ŒAIåœ¨ç–¾ç—…è¯Šæ–­æ–¹é¢çš„å‡†ç¡®ç‡å·²ç»è¶…è¿‡äº†äººç±»åŒ»ç”Ÿ",
                    link: "#",
                    source: "AIç ”ç©¶å‰æ²¿",
                    category: "åŒ»ç–—AI",
                    pubDate: new Date().toISOString(),
                    aiScore: 9.2
                },
                {
                    title: "ChatGPT-5å³å°†å‘å¸ƒï¼Œèƒ½åŠ›å†æ¬¡å¤§å¹…æå‡",
                    description: "OpenAIå®˜æ–¹é€éœ²ï¼Œæ–°ç‰ˆæœ¬å°†åœ¨é€»è¾‘æ¨ç†å’Œå¤šæ¨¡æ€å¤„ç†æ–¹é¢æœ‰é‡å¤§æ”¹è¿›",
                    link: "#",
                    source: "AIè¡Œä¸šåŠ¨æ€",
                    category: "èŠå¤©æœºå™¨äºº",
                    pubDate: new Date(Date.now() - 86400000).toISOString(),
                    aiScore: 9.8
                },
                {
                    title: "Googleå‘å¸ƒæ–°AIæ¨¡å‹Gemini Pro 1.5",
                    description: "æ”¯æŒ100ä¸‡tokenä¸Šä¸‹æ–‡ï¼Œåœ¨å¤šæ¨¡æ€ç†è§£æ–¹é¢è¡¨ç°ä¼˜å¼‚",
                    link: "#",
                    source: "ç§‘æŠ€èµ„è®¯",
                    category: "å¤§è¯­è¨€æ¨¡å‹",
                    pubDate: new Date(Date.now() - 172800000).toISOString(),
                    aiScore: 8.9
                }
            ]
        };

        // AIæ–°é—»å¤„ç†å™¨ç±» - ç®€åŒ–ç‰ˆï¼ˆGitHub Actions + JSONæ•°æ®ï¼‰
        class AINewsProcessor {
            constructor() {
                this.articles = [];
                this.isProcessing = false;
                this.cacheTimestamp = 0;
            }

            async init() {
                console.log('ğŸš€ fds2003çš„AiNavHubç³»ç»Ÿåˆå§‹åŒ–...');

                this.showLoading();

                try {
                    // æ£€æŸ¥æœ¬åœ°ç¼“å­˜
                    const cachedArticles = this.getLocalCache();
                    console.log('ğŸ“ ç¼“å­˜çŠ¶æ€:', { cached: !!cachedArticles, cacheValid: this.isCacheValid() });

                    if (cachedArticles && this.isCacheValid()) {
                        console.log('âœ… ä½¿ç”¨æœ¬åœ°ç¼“å­˜æ•°æ®');
                        this.articles = cachedArticles;
                        this.renderArticles(this.articles);
                        this.updateLastUpdateTime();
                        console.log('ğŸ“‹ ç¼“å­˜æ¸²æŸ“å®Œæˆ');
                        return;
                    }

                    console.log('ğŸ”„ å‡†å¤‡åŠ è½½AIæ–°é—»æ•°æ®...');
                    const articles = await this.loadArticles();
                    console.log('ğŸ“Š æ•°æ®åŠ è½½ç»“æœ:', articles.length, 'ç¯‡æ–‡ç« ');

                    if (articles.length > 0) {
                        this.articles = articles;
                        this.renderArticles(this.articles);
                        this.setLocalCache(this.articles);
                        console.log(`âœ… æˆåŠŸåŠ è½½å¹¶æ¸²æŸ“ ${articles.length} ç¯‡æ–°é—»`);
                    } else {
                        console.log('âš ï¸ æ²¡æœ‰æ‰¾åˆ°æ–‡ç« ï¼Œä½¿ç”¨å¤‡ç”¨æ•°æ®');
                        this.showFallbackData();
                    }

                    this.updateLastUpdateTime();
                    console.log('ğŸ¯ åˆå§‹åŒ–å®Œæˆ');

                } catch (error) {
                    console.error('âŒ ç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥:', error);
                    console.error('é”™è¯¯è¯¦æƒ…:', error.stack);
                    this.showError('æ•°æ®åŠ è½½å¤±è´¥ï¼Œå³å°†ä½¿ç”¨æ¼”ç¤ºæ•°æ®');

                    // æ˜¾ç¤ºå¤‡ç”¨æ•°æ®é¿å…ç©ºç™½é¡µé¢
                    console.log('â° 2ç§’åæ˜¾ç¤ºå¤‡ç”¨æ•°æ®');
                    setTimeout(() => {
                        this.showFallbackData();
                        this.updateLastUpdateTime();
                    }, 2000);
                }
            }

            async loadArticles() {
                try {
                    console.log('ğŸ“¡ å¼€å§‹åŠ è½½AIæ–°é—»æ•°æ®ï¼Œæ•°æ®æº:', AINewsConfig.dataPath);

                    // ä¸»è¦æ–¹æ¡ˆï¼šä»GitHubä»“åº“çš„data/rss-data.jsonåŠ è½½
                    const primaryResponse = await fetch(AINewsConfig.dataPath);
                    console.log('ğŸ” ä¸»æ–‡ä»¶å“åº”çŠ¶æ€ç :', primaryResponse.status);

                    if (primaryResponse.ok) {
                        let data;
                        try {
                            data = await primaryResponse.json();
                            console.log('ğŸ“Š ä¸»æ–‡ä»¶JSONè§£ææˆåŠŸ, æ•°æ®æ ¼å¼éªŒè¯:', !!data);
                        } catch (jsonError) {
                            console.error('âŒ ä¸»æ–‡ä»¶JSONè§£æå¤±è´¥:', jsonError);
                            data = null;
                        }

                        if (data && data.articles && Array.isArray(data.articles) && data.articles.length > 0) {
                            console.log(`âœ… ä¸»æ•°æ®åŠ è½½æˆåŠŸï¼š${data.articles.length} ç¯‡æ–°é—»`);
                            return this.processArticles(data.articles);
                        } else {
                            console.log('âš ï¸ ä¸»æ•°æ®æ ¼å¼é”™è¯¯æˆ–ä¸ºç©ºï¼Œä½¿ç”¨å¤‡ç”¨æ•°æ®');
                            return await this.loadFromBackup();
                        }
                    } else {
                        console.log(`âš ï¸ ä¸»æ–‡ä»¶HTTPé”™è¯¯: ${primaryResponse.status}, ä½¿ç”¨å¤‡ç”¨æ•°æ®`);
                        return await this.loadFromBackup();
                    }
                } catch (fetchError) {
                    console.error('âŒ ä¸»æ–‡ä»¶ç½‘ç»œè¯·æ±‚å¤±è´¥:', fetchError);
                    return await this.loadFromBackup();
                }
            }

            async loadFromBackup() {
                console.log('ğŸ”„ å°è¯•å¤‡ç”¨æ•°æ®æº...');

                try {
                    const backupResponse = await fetch('./data/rss-data-simple.json');
                    console.log('ğŸ” å¤‡ç”¨æ–‡ä»¶å“åº”çŠ¶æ€ç :', backupResponse.status);

                    if (backupResponse.ok) {
                        let data;
                        try {
                            data = await backupResponse.json();
                            console.log('ğŸ“Š å¤‡ç”¨æ–‡ä»¶JSONè§£ææˆåŠŸ');
                        } catch (jsonError) {
                            console.error('âŒ å¤‡ç”¨æ–‡ä»¶JSONè§£æå¤±è´¥:', jsonError);
                            return await this.useLocalDemoData();
                        }

                        if (data && data.articles && Array.isArray(data.articles) && data.articles.length > 0) {
                            console.log(`âœ… å¤‡ç”¨æ•°æ®åŠ è½½æˆåŠŸï¼š${data.articles.length} ç¯‡æ–°é—»`);
                            return this.processArticles(data.articles);
                        } else {
                            console.log('âš ï¸ å¤‡ç”¨æ•°æ®æ ¼å¼é”™è¯¯æˆ–ä¸ºç©º');
                            return await this.useLocalDemoData();
                        }
                    } else {
                        console.log(`âš ï¸ å¤‡ç”¨æ–‡ä»¶HTTPé”™è¯¯: ${backupResponse.status}`);
                        return await this.useLocalDemoData();
                    }
                } catch (backupError) {
                    console.error('âŒ å¤‡ç”¨æ–‡ä»¶ç½‘ç»œè¯·æ±‚å¤±è´¥:', backupError);
                    return await this.useLocalDemoData();
                }
            }

            async useLocalDemoData() {
                console.log('âœ… ä½¿ç”¨å†…ç½®æ¼”ç¤ºæ•°æ®ï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰ï¼Œå‡†å¤‡å¤„ç†', AINewsConfig.fallbackData.length, 'ç¯‡æ–‡ç« ');
                const processedFallback = this.processArticles(AINewsConfig.fallbackData);
                console.log('ğŸ¨ å¤‡ç”¨æ•°æ®å¤„ç†å®Œæˆï¼Œç”Ÿæˆäº†', processedFallback.length, 'ç¯‡æ–‡ç« ');
                return processedFallback;
            }

            processArticles(rawArticles) {
                if (!rawArticles || !Array.isArray(rawArticles)) {
                    return [];
                }

                return rawArticles.map(article => {
                    try {
                        // ç¡®ä¿å¿…è¦å­—æ®µå­˜åœ¨
                        const title = article.title || 'æ— æ ‡é¢˜';
                        const description = article.summary || article.description || title;
                        const link = article.link || '#';
                        const source = article.source || 'AIèµ„è®¯èšåˆ';
                        const category = article.category || 'AIåŠ¨æ€';
                        const pubDate = article.pubDate || article.date || new Date().toISOString();
                        const aiScore = article.aiScore || 5.0;

                        // ç”Ÿæˆä¸­æ–‡æ‘˜è¦
                        const summaryZh = this.generateChineseContent(title, description);

                        // æ¨èç›¸å…³AIå·¥å…·
                        const relatedTools = this.findRelatedTools(title, description);

                        return {
                            id: btoa(title + link).replace(/[^a-zA-Z0-9]/g, '').substr(0, 16),
                            title: title,
                            titleZh: title.replace(/AI/g, 'äººå·¥æ™ºèƒ½').substring(0, 60),
                            summary: (description || title).substring(0, 180),
                            summaryZh: summaryZh,
                            url: link,
                            source: source,
                            category: category,
                            publishTime: pubDate,
                            aiScore: Math.min(Math.max(aiScore, 1), 10), // ç¡®ä¿åœ¨1-10èŒƒå›´å†…
                            author: article.author || 'AIèµ„è®¯ç¼–è¾‘',
                            matchedTools: relatedTools
                        };
                    } catch (error) {
                        console.warn('å¤„ç†å•ç¯‡æ–‡ç« å¤±è´¥:', error, article);
                        return null;
                    }
                }).filter(Boolean); // ç§»é™¤å¤„ç†å¤±è´¥çš„é¡¹ç›®
            }

            generateChineseContent(title, description) {
                const fullText = (title + ' ' + description).toLowerCase();

                // å¦‚æœæ˜¯ä¸­æ–‡å†…å®¹ï¼Œç›´æ¥è¿”å›æ‘˜è¦
                const chineseMatches = fullText.match(/[ä¸€-é¾¥]+/g) || [];
                if (chineseMatches.length > 0 && chineseMatches.join('').length > 20) {
                    return chineseMatches.join('').substring(0, 120) + '...';
                }

                // æ™ºèƒ½ä¸­æ–‡æ‘˜è¦ç”Ÿæˆ
                let summary = '';
                const keyPhrases = [
                    'artificial intelligence', 'AI', 'machine learning', 'deep learning',
                    'neural network', 'natural language', 'computer vision', 'robotics'
                ];

                if (keyPhrases.some(phrase => fullText.includes(phrase))) {
                    summary = 'äººå·¥æ™ºèƒ½é¢†åŸŸæœ€æ–°è¿›å±•ï¼š';
                } else {
                    summary = 'AIç›¸å…³èµ„è®¯ï¼š';
                }

                const cleanDesc = description.replace(/<[^>]+>/g, '').substring(0, 80);
                return summary + cleanDesc + '...';
            }

            findRelatedTools(title, description) {
                const articleText = (title + ' ' + description).toLowerCase();
                const matchedTools = [];

                for (const tool of AINewsConfig.aiTools) {
                    let score = 0;
                    const matchedKeywords = [];

                    for (const keyword of tool.keywords) {
                        if (articleText.includes(keyword.toLowerCase())) {
                            score += 1;
                            matchedKeywords.push(keyword);
                        }
                    }

                    if (score >= 1) {
                        matchedTools.push({
                            tool_name: tool.name,
                            tool_category: tool.category,
                            tool_url: '#', // åç»­å¯ä»¥é…ç½®å…·ä½“å·¥å…·é“¾æ¥
                            reason: `ç›¸å…³å†…å®¹: ${matchedKeywords[0] || 'AIæŠ€æœ¯'}`,
                            score: score
                        });
                    }
                }

                return matchedTools.sort((a, b) => b.score - a.score).slice(0, 3);
            }

            // æ˜¾ç¤ºå¤‡ç”¨æ•°æ®ï¼ˆé¿å…ç©ºç™½é¡µé¢ï¼‰
            showFallbackData() {
                console.log('ğŸ”„ æ˜¾ç¤ºå¤‡ç”¨æ•°æ®');
                try {
                    const fallbackArticles = this.processArticles(AINewsConfig.fallbackData);
                    console.log('ğŸ”§ å¤‡ç”¨æ•°æ®å¤„ç†åæ–‡ç« æ•°:', fallbackArticles.length);

                    // å…ˆæ¸²æŸ“æ–‡ç« 
                    this.renderArticles(fallbackArticles);

                    // å†æ·»åŠ æç¤ºä¿¡æ¯
                    console.log('ğŸ’¡ æ·»åŠ æ¼”ç¤ºæ•°æ®æç¤º');
                    setTimeout(() => { // ç¡®ä¿DOMæ¸²æŸ“å®Œæˆåå†æ’å…¥æç¤º
                        const container = document.getElementById('ai-news-content');
                        if (container) {
                            const notice = document.createElement('div');
                            notice.className = 'bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 text-center';
                            notice.innerHTML = `
                                <p class="text-yellow-800">
                                    <i class="fas fa-info-circle mr-2"></i>
                                    å½“å‰æ˜¾ç¤ºæ¼”ç¤ºæ•°æ®ï¼ŒGitHub Actionså°†åœ¨ä¸‹æ¬¡è¿è¡Œæ—¶è·å–æœ€æ–°AIæ–°é—»
                                </p>
                            `;
                            container.insertBefore(notice, container.firstChild);
                        } else {
                            console.warn('âš ï¸ æ‰¾ä¸åˆ°æ–°é—»å®¹å™¨å…ƒç´ ');
                        }
                    }, 100);
                } catch (error) {
                    console.error('âŒ æ˜¾ç¤ºå¤‡ç”¨æ•°æ®å¤±è´¥:', error);
                    this.showError('æ— æ³•åŠ è½½æ¼”ç¤ºæ•°æ®');
                }
            }

            // æœ¬åœ°ç¼“å­˜ç®¡ç†
            getLocalCache() {
                try {
                    const cached = localStorage.getItem(AINewsConfig.cacheKey);
                    if (cached) {
                        const data = JSON.parse(cached);
                        this.cacheTimestamp = data.timestamp || 0;
                        return data.articles || [];
                    }
                } catch (error) {
                    console.warn('æœ¬åœ°ç¼“å­˜è¯»å–å¤±è´¥:', error);
                }
                return null;
            }

            setLocalCache(articles) {
                try {
                    const data = {
                        articles: articles,
                        timestamp: Date.now(),
                        version: '2.0'
                    };
                    localStorage.setItem(AINewsConfig.cacheKey, JSON.stringify(data));
                    this.cacheTimestamp = data.timestamp;

                    console.log('âœ… æœ¬åœ°ç¼“å­˜ä¿å­˜æˆåŠŸ');
                } catch (error) {
                    console.error('æœ¬åœ°ç¼“å­˜ä¿å­˜å¤±è´¥:', error);
                }
            }

            isCacheValid() {
                if (!this.cacheTimestamp) return false;
                return (Date.now() - this.cacheTimestamp) < AINewsConfig.cacheTimeout;
            }

            // æ›´æ–°æ—¶é—´æ˜¾ç¤º
            updateLastUpdateTime() {
                const timeElement = document.getElementById('last-update-time');
                if (timeElement) {
                    const now = new Date();
                    const timeStr = now.toLocaleString('zh-CN', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                    timeElement.textContent = 'åˆšåˆšæ›´æ–° - ' + timeStr;
                    timeElement.title = `GitHub Actions æ¯4å°æ—¶è‡ªåŠ¨æ›´æ–°, ç”±AiNavHubæœºå™¨äººä¸ºæ‚¨æœåŠ¡ `;
                }
            }


            recommendTools(title, content) {
                const articleText = (title + ' ' + content).toLowerCase();
                const recommendations = [];

                for (const tool of AINewsConfig.aiTools) {
                    let score = 0;
                    let matchedWords = [];

                    for (const keyword of tool.keywords) {
                        if (articleText.includes(keyword.toLowerCase())) {
                            score += 1;
                            matchedWords.push(keyword);
                        }
                    }

                    if (score >= 2) {
                        recommendations.push({
                            tool_name: tool.name,
                            tool_category: tool.category,
                            tool_url: tool.url || '#',
                            reason: `ç›¸å…³æŠ€æœ¯: ${matchedWords.slice(0, 2).join(', ')}`,
                            score: score
                        });
                    }
                }

                return recommendations.sort((a, b) => b.score - a.score).slice(0, 3);
            }

            renderArticles(articles) {
                const container = document.getElementById('ai-news-content');

                if (!articles || articles.length === 0) {
                    container.innerHTML = this.generateEmptyState();
                    return;
                }

                const html = articles.map(article => this.generateArticleHTML(article)).join('');
                container.innerHTML = html;

                console.log(`ğŸ¨ æˆåŠŸæ¸²æŸ“ ${articles.length} ç¯‡AIèµ„è®¯`);

                // ä¿å­˜åˆ°æœ¬åœ°ç¼“å­˜
                this.saveToLocal(articles);
            }

            generateArticleHTML(article) {
                const publishDate = new Date(article.publishTime).toLocaleDateString('zh-CN');

                return `
                    <article class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-6 hover:shadow-lg transition-all duration-300 border-l-4 border-blue-500">
                        <div class="flex flex-col space-y-4">
                            <div class="flex items-start justify-between space-x-4">
                                <h3 class="text-xl font-bold text-gray-900 dark:text-white leading-tight flex-1">
                                    <a href="${article.url}" target="_blank" rel="noopener"
                                       class="block hover:text-blue-600 dark:hover:text-blue-400 transition-colors hover:underline focus:outline-none focus:underline">
                                        ${article.titleZh || article.title}
                                        <i class="fas fa-external-link-alt ml-2 text-xs opacity-60 group-hover:opacity-100 transition-opacity"></i>
                                    </a>
                                </h3>
                                <div class="flex items-center space-x-2">
                                    <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium border border-blue-300 rounded-full">
                                        <i class="fas fa-robot mr-1"></i>${article.aiScore}/10
                                    </span>
                                </div>
                            </div>

                            <p class="text-gray-700 dark:text-gray-300 text-sm leading-relaxed bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg">
                                <i class="fas fa-language text-blue-600 mr-2"></i>
                                ${article.summaryZh || article.summary}
                            </p>

                            <div class="flex items-center justify-between text-sm text-gray-600 dark:text-gray-400">
                                <div class="flex items-center space-x-6">
                                    <span class="flex items-center cursor-pointer" title="å‘å¸ƒæ—¶é—´">
                                        <i class="far fa-calendar-alt mr-2"></i>
                                        ${publishDate}
                                    </span>
                                    <span class="flex items-center cursor-pointer" title="æ¥æº">
                                        <i class="far fa-newspaper mr-2"></i>
                                        AIèµ„è®¯èšåˆ
                                    </span>
                                    <span class="flex items-center cursor-pointer" title="ä½œè€…">
                                        <i class="far fa-user mr-2"></i>
                                        ${article.author}
                                    </span>
                                </div>

                                <div class="flex items-center space-x-3">
                                    <span class="text-gray-500 text-xs">ç›¸å…³å·¥å…·:</span>
                                    ${article.matchedTools.map(tool => `
                                        <a href="${tool.tool_url}"
                                           class="inline-flex items-center px-2 py-1 text-xs font-medium bg-green-100 text-green-800 hover:bg-green-200 rounded-full transition-colors"
                                           title="${tool.reason}">
                                            <i class="fas fa-cog mr-1 text-xs"></i>
                                            ${tool.tool_name}
                                        </a>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    </article>
                `;
            }

            generateEmptyState() {
                return `
                    <div class="text-center py-16 bg-white dark:bg-gray-800 rounded-lg shadow-sm">
                        <div class="text-6xl mb-6 opacity-30">ğŸ“°</div>
                        <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-2">æš‚æ— æ–°çš„AIèµ„è®¯</h3>
                        <p class="text-lg">æˆ‘ä»¬æ­£åœ¨åŠªåŠ›çˆ¬å–æœ€æ–°çš„AIç›¸å…³æ–°é—»ï¼Œè¯·ç¨åå†è¯•</p>
                        <button onclick="AINewsSystem.update()" class="mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                            <i class="fas fa-redo mr-2"></i>é‡æ–°åŠ è½½
                        </button>
                    </div>
                `;
            }

            showLoading() {
                const container = document.getElementById('ai-news-content');
                if (container) {
                    container.innerHTML = `
                        <div class="text-center py-12">
                            <div class="inline-block animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mb-4"></div>
                            <p class="text-gray-600 dark:text-gray-400 text-lg">æ­£åœ¨åŠ è½½AIèµ„è®¯...</p>
                            <p class="text-sm text-gray-500 dark:text-gray-500 mt-2">é¦–æ¬¡åŠ è½½éœ€è¦5-10ç§’</p>
                        </div>
                    `;
                }
            }

            showError(message) {
                const container = document.getElementById('ai-news-content');
                if (container) {
                    container.innerHTML = `
                        <div class="text-center py-16 text-gray-500 dark:text-gray-400">
                            <i class="fas fa-exclamation-triangle text-4xl mb-4 text-yellow-500"></i>
                            <p class="mb-2">èµ„è®¯åŠ è½½å¤±è´¥</p>
                            <p class="text-xs text-gray-400 mb-4">${message}</p>
                            <button onclick="AINewsSystem.update()" class="text-blue-600 hover:text-blue-800">
                                <i class="fas fa-redo mr-1"></i>é‡è¯•
                            </button>
                        </div>
                    `;
                }
            }

            // æ¸²æŸ“æ–‡ç« åˆ—è¡¨ï¼ˆå¤§å¹…ç®€åŒ–ç‰ˆæœ¬ï¼‰
            renderArticles(articles) {
                const container = document.getElementById('ai-news-content');

                if (!articles || articles.length === 0) {
                    container.innerHTML = this.generateEmptyState();
                    return;
                }

                // å°†é…ç½®ä¸­çš„å·¥å…·ä¿¡æ¯ä¹Ÿä¼ å…¥æ¸²æŸ“
                const toolData = AINewsConfig.aiTools;

                const html = articles.slice(0, AINewsConfig.maxArticles).map(article => {
                    return this.generateArticleHTML_simple(article, toolData);
                }).join('');

                container.innerHTML = html;

                console.log(`ğŸ¨ æˆåŠŸæ¸²æŸ“ ${articles.length} ç¯‡AIèµ„è®¯`);
            }

            // ç®€åŒ–ç‰ˆæ–‡ç« HTMLç”Ÿæˆ
            generateArticleHTML_simple(article) {
                const publishDate = new Date(article.publishTime).toLocaleDateString('zh-CN');
                const aiScoreDisplay = Math.round(article.aiScore * 10) / 10; // ä¿ç•™ä¸€ä½å°æ•°

                return `
                    <article class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-6 hover:shadow-lg transition-all duration-300 border-l-4 border-blue-500">
                        <div class="flex flex-col space-y-4">
                            <div class="flex items-start justify-between space-x-4">
                                <h3 class="text-xl font-bold text-gray-900 dark:text-white leading-tight flex-1">
                                    <a href="${article.url}" target="_blank" rel="noopener"
                                       class="block hover:text-blue-600 dark:hover:text-blue-400 transition-colors hover:underline">
                                        ${article.titleZh || article.title}
                                        <i class="fas fa-external-link-alt ml-2 text-xs"></i>
                                    </a>
                                </h3>
                                <div class="flex items-center space-x-2">
                                    <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full border">
                                        <i class="fas fa-robot mr-1"></i>${aiScoreDisplay}/10
                                    </span>
                                    ${article.category ? `<span class="px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded">${article.category}</span>` : ''}
                                </div>
                            </div>

                            <div class="text-gray-700 dark:text-gray-300 text-sm leading-relaxed bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg">
                                <i class="fas fa-language text-blue-600 mr-2"></i>
                                ${article.summaryZh || article.summary}
                            </div>

                            <div class="flex flex-wrap items-center justify-between text-sm text-gray-600 dark:text-gray-400 gap-4">
                                <div class="flex items-center space-x-4">
                                    <span class="flex items-center" title="å‘å¸ƒæ—¶é—´">
                                        <i class="far fa-calendar-alt mr-2"></i> ${publishDate}
                                    </span>
                                    <span class="flex items-center" title="æ¥æº">
                                        <i class="far fa-newspaper mr-2"></i> ${article.source}
                                    </span>
                                    ${article.author ? `<span class="flex items-center" title="ä½œè€…">
                                        <i class="far fa-user mr-2"></i> ${article.author}
                                    </span>` : ''}
                                </div>

                                ${article.matchedTools && article.matchedTools.length > 0 ?
                                    `<div class="flex items-center space-x-2">
                                        <span class="text-xs text-gray-500">ç›¸å…³æ¨è:</span>
                                        ${article.matchedTools.slice(0, 2).map(tool =>
                                            `<span class="px-2 py-1 text-xs bg-green-100 text-green-800 rounded cursor-pointer"
                                                   title="${tool.reason || 'ç›¸å…³AIæŠ€æœ¯'}">
                                                <i class="fas fa-cog mr-1"></i>${tool.tool_name}
                                            </span>`
                                        ).join('')}
                                    </div>` : ''
                                }
                            </div>
                        </div>
                    </article>
                `;
            }

            // ç©ºçŠ¶æ€
            generateEmptyState() {
                return `
                    <div class="text-center py-16 bg-white dark:bg-gray-800 rounded-lg shadow-sm">
                        <div class="text-6xl mb-6">ğŸ“°</div>
                        <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-2">æš‚æ— AIèµ„è®¯</h3>
                        <p class="text-gray-500 mb-4">æˆ‘ä»¬æ­£åœ¨ä¸ºæ‚¨å‡†å¤‡æœ€æ–°çš„AIæ–°é—»ï¼Œè¯·ç¨åå†è¯•</p>
                        <button onclick="location.reload()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                            <i class="fas fa-redo mr-2"></i>é‡æ–°åŠ è½½
                        </button>
                    </div>
                `;
            }


        // å…¨å±€æ¥å£ - ç®€åŒ–å’Œä¼˜åŒ–ç‰ˆæœ¬
        window.AINewsSystem = {
            processor: null,
            isInitialized: false,

            init: async function() {
                if (this.isInitialized) {
                    return true;
                }

                try {
                    if (!this.processor) {
                        this.processor = new AINewsProcessor();
                    }

                    await this.processor.init();
                    this.isInitialized = true;
                    return true;
                } catch (error) {
                    console.error('âŒ ç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥:', error);
                    this.isInitialized = false;
                    return false;
                }
            },

            update: async function() {
                if (this.processor && this.isInitialized) {
                    return await this.processor.init();
                }
                return this.init(); // å¦‚æœè¿å¤„ç†å™¨éƒ½æœªåˆå§‹åŒ–
            },

            // è·å–ç³»ç»Ÿç»Ÿè®¡ä¿¡æ¯
            getStats: function() {
                try {
                    const cached = localStorage.getItem(AINewsConfig.cacheKey);
                    if (cached) {
                        const data = JSON.parse(cached);
                        return {
                            lastUpdate: new Date(data.timestamp).toLocaleString('zh-CN'),
                            articleCount: data.articles ? data.articles.length : 0,
                            cacheValid: Date.now() - data.timestamp < AINewsConfig.cacheTimeout,
                            dataSource: data.articles ? 'local' : 'none'
                        };
                    }
                } catch (error) {
                    console.warn('è·å–ç»Ÿè®¡ä¿¡æ¯å¤±è´¥:', error);
                }

                return {
                    lastUpdate: 'æš‚æ— æ•°æ®',
                    articleCount: 0,
                    cacheValid: false,
                    dataSource: 'none'
                };
            },

            // è·å–å½“å‰æ–‡ç« æ•°æ®
            getArticles: function() {
                return (this.processor && this.processor.articles) ? this.processor.articles : [];
            }
        };

        // æ”¹è¿›ç‰ˆè‡ªåŠ¨åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ fds2003çš„AiNavHubç³»ç»Ÿå¯åŠ¨ - GitHub Actions + JSONæ•°æ®æ¨¡å¼');

            AINewsSystem.init().then(success => {
                if (success) {
                    console.log('âœ… AiNavHubæ–°é—»ç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸï¼');

                    // åˆå§‹åŒ–æ›´æ–°æŒ‰é’®
                    const refreshButton = document.querySelector('button[onclick="AINewsSystem.update()"]');
                    if (refreshButton) {
                        refreshButton.textContent = 'åˆ·æ–°æ–°é—»';
                        refreshButton.innerHTML = '<i class="fas fa-refresh mr-1"></i>åˆ·æ–°æ–°é—»';
                    }
                } else {
                    console.warn('âš ï¸ ç³»ç»Ÿåˆå§‹åŒ–éƒ¨åˆ†å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ•°æ®');
                }
            }).catch(error => {
                console.error('âŒ ç³»ç»Ÿåˆå§‹åŒ–å‡ºé”™:', error);

                // æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯æç¤º
                setTimeout(() => {
                    const container = document.getElementById('ai-news-content');
                    if (container) {
                        container.innerHTML = `
                            <div class="text-center py-16 bg-red-50 border border-red-200 rounded-lg">
                                <i class="fas fa-exclamation-triangle text-4xl mb-4 text-red-500"></i>
                                <h3 class="text-lg font-medium text-red-800 mb-2">ç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥</h3>
                                <p class="text-red-600 mb-4">ä½†è¯·ä¸è¦æ‹…å¿ƒï¼</p>
                                <button onclick="location.reload()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                                    <i class="fas fa-redo mr-2"></i>é‡è¯•
                                </button>
                            </div>
                        `;
                    }
                }, 3000);
            });
        });
    </script>
</body>
</html>