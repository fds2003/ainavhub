<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>AIæ–°é—»ç³»ç»Ÿè°ƒè¯•</title>
</head>
<body>
    <div id="status">ç­‰å¾…åˆå§‹åŒ–...</div>
    <div id="console-output"></div>
    <div id="news-content">å†…å®¹åŒºåŸŸ</div>

    <script>
        // é‡å†™console.logæ¥æ•è·è°ƒè¯•è¾“å‡º
        const consoleOutput = document.getElementById('console-output');
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            consoleOutput.innerHTML += '<div>' + args.join(' ') + '</div>';
        };

        const AINewsConfig = {
            dataPath: './data/rss-data.json',
            cacheTimeout: 30 * 60 * 1000,
            fallbackData: [{
                title: "æµ‹è¯•æ–‡ç« ",
                description: "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡ç« ",
                link: "#",
                source: "æµ‹è¯•æ¥æº",
                pubDate: new Date().toISOString(),
                aiScore: 8.5
            }]
        };

        class SimpleNewsLoader {
            constructor() {
                this.articles = [];
                console.log('ğŸš€ SimpleNewsLoader åˆå§‹åŒ–');
            }

            async init() {
                console.log('ğŸ“¡ å¼€å§‹åŠ è½½æ–°é—»æ•°æ®...');

                try {
                    // æµ‹è¯•ç®€å•æ•°æ®åŠ è½½
                    console.log('ğŸ”„ æµ‹è¯•ä¸»æ•°æ®æº...');
                    const response = await fetch(AINewsConfig.dataPath);
                    console.log('ğŸ“Š å“åº”çŠ¶æ€:', response.ok, 'çŠ¶æ€ç :', response.status);

                    if (response.ok) {
                        const data = await response.json();
                        console.log('âœ… æ•°æ®åŠ è½½æˆåŠŸ');
                        console.log('ğŸ“° æ–‡ç« æ•°é‡:', data.articles?.length || 0);
                        this.articles = data.articles || [];
                        this.renderArticles(this.articles);
                    } else {
                        console.log('âš ï¸ HTTPé”™è¯¯, ä½¿ç”¨å¤‡ç”¨æ•°æ®');
                        this.useFallbackData();
                    }
                } catch (error) {
                    console.log('âŒ åŠ è½½é”™è¯¯:', error.name, error.message);
                    this.useFallbackData();
                }
            }

            useFallbackData() {
                console.log('âœ… ä½¿ç”¨å¤‡ç”¨æ•°æ®');
                this.articles = AINewsConfig.fallbackData;
                this.renderArticles(this.articles);
            }

            renderArticles(articles) {
                const contentArea = document.getElementById('news-content');
                if (articles.length > 0) {
                    contentArea.innerHTML = articles.map(article => `
                        <div style="border: 1px solid #ccc; margin: 10px; padding: 10px; border-radius: 5px;">
                            <h3>${article.title}</h3>
                            <p>${article.description}</p>
                            <div style="font-size: 0.9em; color: #666;">
                                <span>æ¥æº: ${article.source}</span> |
                                <span>è¯„åˆ†: ${article.aiScore}/10</span>
                            </div>
                        </div>
                    `).join('');
                } else {
                    contentArea.innerHTML = '<p style="color: red;">æš‚æ— å†…å®¹</p>';
                }
            }
        }

        // å¼€å§‹æµ‹è¯•
        document.getElementById('status').textContent = 'ğŸ¤– ç³»ç»Ÿæ­£åœ¨å¯åŠ¨...';

        const newsLoader = new SimpleNewsLoader();
        newsLoader.init().then(() => {
            console.log('âœ… åˆå§‹åŒ–å®Œæˆ');
            document.getElementById('status').textContent = 'âœ… åˆå§‹åŒ–å®Œæˆ';
        }).catch(error => {
            console.log('âŒ åˆå§‹åŒ–å¤±è´¥:', error);
            document.getElementById('status').textContent = 'âŒ åˆå§‹åŒ–å¤±è´¥';
        });
    </script>
</body>
</html>