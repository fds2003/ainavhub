<!DOCTYPE html>
<html>
<head>
    <title>æµ‹è¯•æ•°æ®åŠ è½½</title>
</head>
<body>
    <h1>AIæ–°é—»æ•°æ®åŠ è½½æµ‹è¯•</h1>
    <div id="loading-status">æ­£åœ¨åŠ è½½...</div>
    <div id="data-result">æ•°æ®ç»“æœï¼š</div>
    <div id="error-output">é”™è¯¯ä¿¡æ¯ï¼š</div>

    <script>
        console.log('ğŸš€ å¼€å§‹æµ‹è¯•æ•°æ®åŠ è½½...');

        async function testDataLoading() {
            const statusEl = document.getElementById('loading-status');
            const resultEl = document.getElementById('data-result');
            const errorEl = document.getElementById('error-output');

            try {
                statusEl.textContent = 'ğŸ“¡ å°è¯•åŠ è½½ä¸»æ•°æ®æº...';

                // æµ‹è¯•ä¸»æ•°æ®æ–‡ä»¶
                const primaryResponse = await fetch('./data/rss-data.json');
                console.log('ä¸»æ–‡ä»¶å“åº”çŠ¶æ€:', primaryResponse.status);

                if (primaryResponse.ok) {
                    const data = await primaryResponse.json();
                    console.log('âœ… ä¸»æ•°æ®åŠ è½½æˆåŠŸ:', data);
                    statusEl.textContent = 'âœ… ä¸»æ•°æ®åŠ è½½æˆåŠŸï¼';
                    resultEl.innerHTML = `
                        <h3>åŠ è½½æˆåŠŸ</h3>
                        <p>æ–‡ç« æ•°é‡: ${data.articles.length}</p>
                        <p>æ•°æ®æ¥æº: ${data.metadata.sources.join(', ')}</p>
                        <p>æ›´æ–°æ—¶é—´: ${data.metadata.generatedAt}</p>
                    `;
                    return;
                } else {
                    statusEl.textContent = 'âš ï¸ ä¸»æ•°æ®åŠ è½½å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨æ•°æ®...';

                    // æµ‹è¯•å¤‡ç”¨æ•°æ®æ–‡ä»¶
                    const secondaryResponse = await fetch('./data/rss-data-simple.json');
                    console.log('å¤‡ç”¨æ–‡ä»¶å“åº”çŠ¶æ€:', secondaryResponse.status);

                    if (secondaryResponse.ok) {
                        const data = await secondaryResponse.json();
                        console.log('âœ… å¤‡ç”¨æ•°æ®åŠ è½½æˆåŠŸ:', data);
                        statusEl.textContent = 'âœ… å¤‡ç”¨æ•°æ®åŠ è½½æˆåŠŸï¼';
                        resultEl.innerHTML = `
                            <h3>å¤‡ç”¨æ•°æ®åŠ è½½æˆåŠŸ</h3>
                            <p>æ–‡ç« æ•°é‡: ${data.articles.length}</p>
                            <p>ç¬¬ä¸€ä¸ªæ ‡é¢˜: ${data.articles[0].title.substring(0, 50)}...</p>
                        `;
                        return;
                    }
                }

                statusEl.textContent = 'âŒ æ‰€æœ‰æ•°æ®æºéƒ½æ— æ³•åŠ è½½ï¼Œä½¿ç”¨å¤‡ç”¨æ•°æ®';
                resultEl.innerHTML = '<p>ä½¿ç”¨å†…ç½®æ¼”ç¤ºæ•°æ®</p>';

            } catch (error) {
                console.error('âŒ æ•°æ®åŠ è½½é”™è¯¯:', error);
                statusEl.textContent = 'âŒ æ•°æ®åŠ è½½å‡ºé”™';
                errorEl.innerHTML = `
                    <h3>é”™è¯¯è¯¦æƒ…:</h3>
                    <p>é”™è¯¯ç±»å‹: ${error.name}</p>
                    <p>é”™è¯¯ä¿¡æ¯: ${error.message}</p>
                    <p>å †æ ˆè·Ÿè¸ª: ${error.stack}</p>
                `;
            }
        }

        // ç­‰å¾…é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œæµ‹è¯•
        window.addEventListener('DOMContentLoaded', testDataLoading);
    </script>
</body>
</html>